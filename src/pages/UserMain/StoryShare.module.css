.wrap {
  position: relative;
  height: 100%;
  background: #000;
  overflow: hidden;
}
.wrap, .wrap * { box-sizing: border-box; }

.hiddenInput { display: none; }

.stage {
  position: absolute;
  inset: 0;
  overflow: hidden;
  background: #000;
}

/* ===== 상단 오버레이 (흰 바 없이 버튼만) ===== */
.topOverlay {
  position: absolute;
  top: calc(env(safe-area-inset-top, 0px) + 12px);
  left: 12px;
  right: 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  z-index: 200;
  pointer-events: none; /* 버튼만 클릭되게 */
}

.overlayBtn {
  width: 44px;
  height: 44px;
  border: 0;
  background: transparent;
  padding: 0;
  cursor: pointer;
  pointer-events: auto;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.overlayIcon {
  width: 24px;
  height: 24px;
  object-fit: contain;
  display: block;
}

.overlaySpacer { width: 44px; height: 44px; }

/* ===== 카메라 스테이지 ===== */
.cameraStage {
  position: absolute;
  inset: 0;
  overflow: hidden;
  background: #000;
}

.camVideo {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* ✅ 전면(user)일 때만 좌우 반전 */
.mirrored { transform: scaleX(-1); }

.camError {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  padding: 16px;
  color: #fff;
  font-family: Pretendard, system-ui, -apple-system, "Noto Sans KR", Segoe UI, Roboto, Arial, sans-serif;
  font-size: 14px;
  font-weight: 600;
  text-align: center;
  background: #111;
}

/* ===== 하단 컨트롤 ===== */
.controls {
  position: absolute;
  left: 0;
  right: 0;
  bottom: calc(env(safe-area-inset-bottom, 0px) + 50px);
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 60px;
  padding: 0 16px;
  z-index: 120;
}

.thumbBtn {
  width: 48px;
  height: 48px;
  border: 0;
  background: transparent;
  padding: 0;
  cursor: pointer;
  flex: 0 0 auto;
}

.thumbImg {
  width: 44px;
  height: 44px;
  border-radius: 10px;
  object-fit: cover;
  border: 2px solid rgba(255,255,255,0.85);
  display: block;
}

.thumbPlaceholder {
  width: 44px;
  height: 44px;
  border-radius: 10px;
  border: 2px solid rgba(255,255,255,0.75);
  background: rgba(0,0,0,0.18);
}

.btnImg {
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
}

.shutterBtn {
  width: 48px;   /* 74 -> 58 */
  height: 48px;
  border: 0;
  background: transparent;
  padding: 0;
  cursor: pointer;
  flex: 0 0 auto;
}
.shutterBtn:disabled { opacity: 0.4; cursor: not-allowed; }

.flipBtn {
  width: 40px;   /* 48 -> 36 */
  height: 40px;
  border: 0;
  background: transparent;
  padding: 0;
  cursor: pointer;
  flex: 0 0 auto;
}
.flipBtn:disabled { opacity: 0.4; cursor: not-allowed; }

/* ===== confirm ===== */
.confirmImg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.confirmControls {
  position: absolute;
  left: 0;
  right: 0;
  bottom: calc(env(safe-area-inset-bottom, 0px) + 22px);
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 14px;
  padding: 0 16px;
  z-index: 130;
}

.retakeBtn {
  width: 120px;
  height: 52px;
  border: 0;
  background: transparent;
  padding: 0;
  cursor: pointer;
}

.nextBtn {
  width: 64px;
  height: 64px;
  border: 0;
  background: transparent;
  padding: 0;
  cursor: pointer;
}

/* ===== preview ===== */
.previewStage {
  position: absolute;
  inset: 0;
  padding: 12px 16px 16px;
  display: grid;
  grid-template-rows: 1fr auto;
  gap: 12px;
  background: #fff;
}

.previewCanvas {
  position: relative;
  border-radius: 16px;
  overflow: hidden;
  background: #111;
}

.previewImg {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.previewFallback {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  color: #fff;
  font-family: Pretendard, system-ui, -apple-system, "Noto Sans KR", Segoe UI, Roboto, Arial, sans-serif;
  font-weight: 700;
}

.previewActions {
  display: flex;
  gap: 10px;
}

.previewShareBtn {
  position: absolute;
  right: calc(env(safe-area-inset-right, 0px) + 22px);
  bottom: calc(env(safe-area-inset-bottom, 0px) + 22px);
  z-index: 150;
}

.previewArrowBtn {
  width: 56px;
  height: 56px;
  border: 0;
  background: transparent;
  padding: 0;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.previewArrowBtn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.previewArrowImg {
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
}

.previewArrowFallback {
  display: grid;
  place-items: center;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  border: 2px solid rgba(255, 255, 255, 0.85);
  background: rgba(0, 0, 0, 0.35);
  backdrop-filter: blur(6px);
  color: #fff;
  font-size: 22px;
  font-weight: 700;
}

/* ===== footer (preview에서만) ===== */
.footer {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  background: #fff;
  padding: 12px 16px calc(12px + env(safe-area-inset-bottom, 0px));
  border-top: 1px solid rgba(0,0,0,0.08);
  z-index: 300;
}

.footerRow {
  display: flex;
  gap: 10px;
}

.secondaryBtn {
  flex: 1 1 0;
  height: 52px;
  border-radius: 12px;
  border: 1px solid rgba(0,0,0,0.10);
  background: #fff;
  color: #232526;
  font-family: Pretendard;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
}

.primaryBtn {
  flex: 1 1 0;
  height: 52px;
  border: 0;
  border-radius: 12px;
  background: #3A3E40;
  color: #fff;
  font-family: Pretendard;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
}

.secondaryBtn:disabled,
.primaryBtn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}
/* ===================== 안내 오버레이(모달) ===================== */
.infoBackdrop {
  position: absolute;
  inset: 0;
  z-index: 999; /* topOverlay(200)보다 위 */
  background: rgba(0, 0, 0, 0.35);
  display: grid;
  place-items: center;
  padding: 16px;
}

/* 모달 본문(여기 클릭하면 안 닫히게) */
.infoModal {
  width: min(360px, 86vw);
  /* 필요하면 높이도 제한 가능 */
  max-height: 85vh;
  display: grid;
  place-items: center;
}

/* 네가 넣을 "핸드폰 모양" 이미지 자리 */
.infoPhoneImg {
  width: 127px;
  height: 249px;
  object-fit: contain;
  display: block;
  user-select: none;
  -webkit-user-drag: none;
}

/* 이미지 대신 임시로 보일 placeholder(원하면 삭제 가능) */
.infoPlaceholder {
  width: 100%;
  aspect-ratio: 9 / 16;
  border-radius: 22px;
  border: 2px solid rgba(255, 255, 255, 0.7);
  background: rgba(255, 255, 255, 0.12);
  backdrop-filter: blur(6px);
}
/* info 모달 안에서 핸드폰 + 문구 같이 배치 */
.infoContent {
  display: grid;
  place-items: center;
  gap: 14px;
}

/* info 모달 문구(위쪽) */
.infoHintText {
  width: 100%;
  text-align: center;
  white-space: pre-line;
  color: #FFF;
  font-family: Pretendard;
  font-size: 16px;
  font-weight: 500;
  line-height: 20px;
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.45);
  margin-bottom: 14px; /* 핸드폰 이미지 위 간격 */
}

/* ===================== confirm: 왼쪽 썸네일 + 가운데/오른쪽 버튼만 ===================== */
.confirmBar2 {
  position: absolute;
  left: 0;
  right: 0;
  bottom: calc(env(safe-area-inset-bottom, 0px) + 50px); /* camera와 동일한 위치 */
  display: flex;
  align-items: center;
  justify-content: center; /* camera와 동일 */
  gap: 12px; /* camera와 동일한 gap */
  padding: 0 16px;
  z-index: 140;
}

/* 왼쪽 썸네일: 버튼이 아니라 "그냥 표시"만 (camera의 thumbBtn과 동일한 위치) */
.confirmLeftThumb {
  width: 48px;  /* ✅ camera의 thumbBtn과 동일 크기 */
  height: 48px;
  flex: 0 0 auto;
  display: flex;
  align-items: center;
  justify-content: center;
  order: 0; /* 왼쪽에 배치 */
}

/* 가운데 pill (flex에 포함되어 양쪽 버튼 사이에 자연스럽게 배치) */
.confirmRetakePill2 {
  height: 50px;
  min-width: 150px;
  border: 0;
  background: transparent;
  padding: 0;
  cursor: pointer;
  flex: 0 0 auto;
}

/* 이미지가 없을 때 fallback */
.confirmRetakeFallback2 {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 52px;
  padding: 0 18px;
  border-radius: 999px;
  background: rgba(0, 0, 0, 0.55);
  backdrop-filter: blur(6px);
  color: #fff;
  font-family: Pretendard;
  font-size: 16px;
  font-weight: 600;
}

/* 오른쪽 원형 다음 (camera의 flipBtn과 동일한 크기) */
.confirmNextCircle2 {
  width: 40px; /* flipBtn과 동일 */
  height: 40px; /* flipBtn과 동일 */
  border: 0;
  background: transparent;
  padding: 0;
  cursor: pointer;
  flex: 0 0 auto;
  order: 2; /* 오른쪽에 배치 */
}

.confirmNextFallback2 {
  display: grid;
  place-items: center;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  border: 2px solid rgba(255, 255, 255, 0.55);
  background: rgba(0, 0, 0, 0.25);
  color: #fff;
  font-size: 22px;
  font-weight: 700;
}

.confirmBtnImg {
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
}
